# PracticeRaptor: Функциональные требования

## 1. Общее описание

**PracticeRaptor** — платформа для отработки практических навыков программирования через короткие алгоритмические задания (problems). Платформа предоставляет единую функциональность через различные интерфейсы: CLI, Telegram-бот, веб-сайт, встраиваемый виджет.

### 1.1. Терминология

| Термин | Описание |
|--------|----------|
| **Problem** | Алгоритмическая задача с описанием, примерами и тестами |
| **Submission** | Успешно пройденное решение пользователя |
| **Solution** | Эталонное/каноническое решение задачи |
| **Draft** | Незавершённый код пользователя (автосохранение) |
| **Attempt** | Попытка решения (успешная или нет) |

### 1.2. Поддерживаемые интерфейсы

| Интерфейс | Описание | Модель |
|-----------|----------|--------|
| CLI | Командная строка для локального использования | Open-source |
| Telegram Bot | Решение задач через мессенджер | Freemium |
| Web | Полнофункциональный сайт | Freemium |
| Widget | Встраиваемый компонент для учебных платформ | B2B |

---

## 2. Работа с задачами (Problems)

### 2.1. Каталог задач

- Просмотр списка доступных задач
- Фильтрация по сложности: Easy, Medium, Hard
- Фильтрация по тематике: Arrays, Strings, Linked Lists, Trees, и т.д.
- Фильтрация по статусу: все / нерешённые / решённые
- Поиск по названию
- Выбор случайной задачи с учётом фильтров

### 2.2. Просмотр задачи

- Название и сложность
- Тематические теги
- Полное описание условия
- Примеры с входными данными, ожидаемым результатом и пояснением
- Сигнатура функции для выбранного языка программирования

### 2.3. Мультиязычность задач (i18n)

- Описание задачи доступно на нескольких языках (English, Русский, ...)
- Язык интерфейса по умолчанию: English
- Пользователь выбирает язык в настройках
- Все текстовые поля (название, описание, примеры, подсказки) локализуются

---

## 3. Решение задач

### 3.1. Выбор языка программирования

- Python 3 (базовый, доступен с первого этапа)
- Go, Java, JavaScript (в перспективе)
- Пользователь может решать одну задачу на разных языках
- Каждый язык имеет свою сигнатуру функции

### 3.2. Ввод кода

- Многострочный ввод кода решения
- Проверка синтаксиса перед выполнением
- Возможность сброса и начала заново
- Возможность отмены и возврата к списку задач

### 3.3. Режим редактора (CLI)

При переходе в режим внешнего редактора (vim, nano, VS Code):
- Открывается файл с закомментированным описанием задачи
- Включены примеры и сигнатура функции
- Пользователь пишет код, видя условие перед глазами
- При сохранении комментарии с условием автоматически удаляются

```python
# ════════════════════════════════════════════════════════════
# Problem: Two Sum
# Difficulty: Easy
# Tags: array, hash-table
# ════════════════════════════════════════════════════════════
#
# Given an array of integers nums and an integer target,
# return indices of the two numbers such that they add up to target.
#
# Example 1:
#   Input: nums = [2,7,11,15], target = 9
#   Output: [0,1]
#
# ════════════════════════════════════════════════════════════

def two_sum(nums: list[int], target: int) -> list[int]:
    # Your code here
    pass
```

### 3.4. Автосохранение (Drafts)

- Незавершённый код автоматически сохраняется
- При выходе и повторном входе — draft восстанавливается
- Один draft на комбинацию (user + problem + language)
- Draft перезаписывается при каждом изменении

### 3.5. Проверка решения

**Быстрая проверка:**
- Запуск только на примерах из условия
- Быстрая обратная связь без полного тестирования

**Полная проверка:**
- Запуск на всех тест-кейсах (включая граничные случаи)
- Остановка при первой ошибке
- Отображение: входные данные, ожидаемый результат, фактический результат

### 3.6. Результаты выполнения

**При ошибке:**
- Описание ошибки (синтаксис, runtime, wrong answer, timeout)
- Для wrong answer: входные данные, ожидаемый и фактический результат
- Возможность исправить и попробовать снова

**При успехе:**
- Поздравительное сообщение
- Статистика: время выполнения, использованная память
- Возможность перейти к следующей задаче

---

## 4. Подсказки и эталонные решения

### 4.1. Подсказки (Hints)

- Теоретическая информация по алгоритму
- Подсказки по подходу к решению
- Доступны до и во время решения

### 4.2. Эталонные решения (Solutions)

- Канонические решения с разными подходами
- Указана алгоритмическая сложность (O-notation)
- Доступны после успешного решения или по запросу

### 4.3. Community Solutions

- Успешные submissions пользователей автоматически добавляются в базу
- Добавляются только уникальные (оригинальные) решения
- Авторство не отображается, только статистика
- Периодическая модерация: удаление однотипных решений

---

## 5. Пользователи и прогресс

### 5.1. Идентификация пользователя

| Интерфейс | Идентификация |
|-----------|---------------|
| CLI | Локальный пользователь (anonymous или конфиг) |
| Telegram | Telegram ID |
| Web | Регистрация / OAuth |
| Widget | SSO с учебной платформой |

### 5.2. Настройки пользователя

- Предпочитаемый язык программирования
- Язык интерфейса (i18n)
- Фильтры по умолчанию (сложность, тематика)
- Настройки отображения

### 5.3. Прогресс

- Задача считается решённой, если решена хотя бы на одном языке
- Отслеживание: решено X из Y задач
- Группировка по сложности: Easy (X/Y), Medium (X/Y), Hard (X/Y)
- Группировка по тематике

### 5.4. История решений (Submissions)

- Сохраняются только успешные submissions
- Для каждого submission: код, язык, время, дата
- Возможность просмотра своих предыдущих решений
- Одна задача может иметь несколько submissions (разные языки, разные подходы)

### 5.5. Статистика

- Общее количество решённых задач
- Распределение по сложности
- Распределение по тематикам
- Streak (дни подряд с решёнными задачами)
- Время на решение (среднее, лучшее)

---

## 6. Интерфейс-специфичные особенности

### 6.1. CLI

- Работа в терминале без графического интерфейса
- Команды: выбор задачи, фильтрация, редактор, подсказки
- Открытие кода во внешнем редакторе (vim, nano, code)
- Конфигурационный файл (~/.practiceraptor.yaml)
- Цветовой вывод с поддержкой тем
- Загрузка решения из файла

### 6.2. Telegram Bot

- Inline-клавиатуры для навигации
- Код вводится сообщением (без начальных отступов — добавляются автоматически)
- Компактное отображение для мобильных устройств
- FSM для управления состоянием диалога

### 6.3. Web

- Полнофункциональный интерфейс в браузере
- Встроенный редактор кода с подсветкой синтаксиса
- Адаптивный дизайн (desktop + mobile)

### 6.4. Widget

- Встраивание через iframe
- SSO с родительской платформой
- Минималистичный интерфейс
- PostMessage API для взаимодействия с родительской страницей

---

## 7. Монетизация (Freemium)

### 7.1. Бесплатный доступ

- Ограниченное количество задач
- Базовая статистика
- Реклама (для Telegram/Web)

### 7.2. Premium-подписка

- Полный доступ ко всем задачам
- Расширенная статистика и аналитика
- Без рекламы
- Приоритетное выполнение кода

### 7.3. CLI

- Всегда бесплатен (open-source)
- Полная функциональность без ограничений

---

## 8. Безопасность

### 8.1. Выполнение кода

- Изолированное выполнение (sandbox)
- Ограничения: время, память, CPU
- Запрет сетевого доступа
- Whitelist разрешённых модулей/библиотек

### 8.2. Данные пользователей

- Минимальный сбор данных
- Шифрование чувствительной информации
- Возможность удаления аккаунта и данных
